(()=>{"use strict";var t={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(t){var r=function(t){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}var o=function(){return t=function t(e,r){var n=e.item,o=e.currentUser,i=e.handleCardClick,u=e.handleDeleteCard,a=e.handleLikeCard;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cardId=n._id,this._name=n.name,this._link=n.link,this._likes=n.likes,this._ownerId=n.owner._id,this._cardElement=r,this._handleCardClick=i,this._handleDeleteCard=u,this._handleLikeCard=a,this._currentUser=o},(e=[{key:"_getCardTemplate",value:function(){return document.querySelector(this._cardElement).content.querySelector("li").cloneNode(!0)}},{key:"updateLikes",value:function(t,e){var r=this;0!==t.length?this._cardLikeCounter.textContent=t.length:this._cardLikeCounter.textContent="0","setLike"===e?this._cardLikeButton.classList.add("photo-card__like-button_active"):this._cardLikeButton.classList.remove("photo-card__like-button_active"),t.some((function(t){return t._id===r._currentUser}))&&this._cardLikeButton.classList.add("photo-card__like-button_active")}},{key:"_setEventListeners",value:function(){var t=this;this._cardLikeButton.addEventListener("click",(function(){t._cardLikeButton.classList.contains("photo-card__like-button_active")?t._handleLikeCard.handleDeleteLike(t._cardId,t._cardItem):t._handleLikeCard.handleSetLike(t._cardId,t._cardItem)})),this._ownerId===this._currentUser&&this._cardDeleteButton.addEventListener("click",(function(){return t._handleDeleteCard(t._cardId,t._cardItem)})),this._cardImage.addEventListener("click",(function(){return t._handleCardClick()}))}},{key:"deleteCard",value:function(){this._cardItem.remove(),this._cardItem=null}},{key:"createCard",value:function(){return this._cardItem=this._getCardTemplate(),this._cardImage=this._cardItem.querySelector(".photo-card__image"),this._cardLikeButton=this._cardItem.querySelector(".photo-card__like-button"),this._cardLikeCounter=this._cardItem.querySelector(".photo-card__like-counter"),this._cardDeleteButton=this._cardItem.querySelector(".photo-card__delete"),this._cardItem.querySelector(".photo-card__title").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._ownerId!==this._currentUser&&this._cardDeleteButton.remove(),this.updateLikes(this._likes,""),this._setEventListeners(),this._cardItem}}])&&r(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var c=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupInput=e.inputSelector,this._popupSubmit=e.submitButtonSelector,this._popupSubmitDisabled=e.inactiveButtonClass,this._popupInputTypeError=e.inputErrorClass,this._popupErrorVisible=e.errorClass,this._formToValidate=r,this._submitButton=this._formToValidate.querySelector(this._popupSubmit),this._inputArray=this._formToValidate.querySelectorAll(this._popupInput)},(e=[{key:"_showInputError",value:function(t,e){var r=this._formToValidate.querySelector("#".concat(t.id,"-error"));r.textContent=e,t.classList.add(this._popupInputTypeError),r.classList.add(this._popupErrorVisible)}},{key:"_hideInputError",value:function(t){var e=this._formToValidate.querySelector("#".concat(t.id,"-error"));e.textContent="",t.classList.remove(this._popupInputTypeError),e.classList.remove(this._popupErrorVisible)}},{key:"_validateInput",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"switchSubmitButton",value:function(){0===Array.from(this._inputArray).filter((function(t){return!t.validity.valid})).length?(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._popupSubmitDisabled)):(this._submitButton.disabled=!0,this._submitButton.classList.add(this._popupSubmitDisabled))}},{key:"validateInputs",value:function(){var t=this;this._inputArray.forEach((function(e){t._validateInput(e),t._hideInputError(e)}))}},{key:"_setInputEvtListeners",value:function(){var t=this;this._formToValidate.addEventListener("submit",(function(t){t.preventDefault()})),this._inputArray.forEach((function(e){e.addEventListener("input",(function(){t._validateInput(e),t.switchSubmitButton()}))}))}},{key:"enableValidation",value:function(){this._setInputEvtListeners(this._formToValidate)}}])&&u(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function f(t){var e=function(t){if("object"!=l(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}var p=function(){return t=function t(e,r){var n=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=n,this._container=document.querySelector(r)},(e=[{key:"addItem",value:function(t){this._container.append(t)}},{key:"addNewItem",value:function(t){this._container.prepend(t)}},{key:"renderElements",value:function(t){var e=this;this._container.innerHTML="",t.forEach((function(t){e._renderer(t)}))}}])&&s(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function h(t){var e=function(t){if("object"!=d(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==d(e)?e:e+""}var v=function(){return t=function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEsc=function(t){r._handleEscClose(t)}},(e=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEsc)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEsc)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("click",(function(e){(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close-button"))&&t.close()}))}}])&&y(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_(n.key),n)}}function _(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}function S(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(S=function(){return!!t})()}function w(t,e,r,n){var o=k(g(1&n?t.prototype:t),e,r);return 2&n&&"function"==typeof o?function(t){return o.apply(r,t)}:o}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},k.apply(null,arguments)}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function L(t,e){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},L(t,e)}var E=function(t){function e(t,r){var n,o=r.handleSubmitForm;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,r){return e=g(e),function(t,e){if(e&&("object"==b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,S()?Reflect.construct(e,r||[],g(t).constructor):e.apply(t,r))}(this,e,[t]))._handleSubmitForm=o,n._form=n._popup.querySelector(".popup__form"),n._inputList=n._form.querySelectorAll(".popup__input"),n._submitbutton=n._popup.querySelector(".popup__submit"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L(t,e)}(e,t),r=e,(n=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"setEventListeners",value:function(){var t=this;w(e,"setEventListeners",this,3)([]),this._form.addEventListener("submit",(function(){t.renderLoading(!0),t._handleSubmitForm(t._getInputValues())}))}},{key:"close",value:function(){w(e,"close",this,3)([]),this._form.reset()}},{key:"renderLoading",value:function(t){this._submitbutton.textContent=t?"Сохранение...":this._submitbutton.dataset.value}}])&&m(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(v);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j(n.key),n)}}function j(t){var e=function(t){if("object"!=P(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==P(e)?e:e+""}function C(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(C=function(){return!!t})()}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},I.apply(null,arguments)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}function R(t,e){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},R(t,e)}var q=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=T(e),function(t,e){if(e&&("object"==P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,C()?Reflect.construct(e,r||[],T(t).constructor):e.apply(t,r))}(this,e,[t]))._image=r._popup.querySelector(".popup__image"),r._caption=r._popup.querySelector(".popup__caption"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R(t,e)}(e,t),r=e,n=[{key:"open",value:function(t){var r,n,o,i=t.title,u=t.src;this._image.src=u,this._image.alt=i,this._caption.textContent=i,(r=e,n=this,"function"==typeof(o=I(T(1&3?r.prototype:r),"open",n))?function(t){return o.apply(n,t)}:o)([])}}],n&&O(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(v);function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U(n.key),n)}}function U(t){var e=function(t){if("object"!=B(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==B(e)?e:e+""}function V(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(V=function(){return!!t})()}function A(t,e,r,n){var o=x(F(1&n?t.prototype:t),e,r);return 2&n&&"function"==typeof o?function(t){return o.apply(r,t)}:o}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},x.apply(null,arguments)}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}function N(t,e){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},N(t,e)}var H=function(t){function e(t,r){var n,o=r.handleSubmitDelete;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,r){return e=F(e),function(t,e){if(e&&("object"==B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,V()?Reflect.construct(e,r||[],F(t).constructor):e.apply(t,r))}(this,e,[t]))._handleSubmitDelete=o,n._form=n._popup.querySelector(".popup__form"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e)}(e,t),r=e,(n=[{key:"setEventListeners",value:function(){var t=this;A(e,"setEventListeners",this,3)([]),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmitDelete(t._idCard,t._card)}))}},{key:"getCard",value:function(t,e){this._clear(),this._idCard=t,this._cardElement=e}},{key:"open",value:function(t){this._card=t,A(e,"open",this,3)([])}},{key:"_clear",value:function(){this._idCard="",this._cardElement=""}}])&&D(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(v);function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z(n.key),n)}}function z(t){var e=function(t){if("object"!=J(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==J(e)?e:e+""}var G=function(){return t=function t(e){var r=e.profileTitle,n=e.profileAbout,o=e.profileAvatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._title=document.querySelector(r),this._about=document.querySelector(n),this._avatar=document.querySelector(o)},(e=[{key:"getUserInfo",value:function(){return this._info={title:this._title.textContent,about:this._about.textContent,avatar:this._avatar.src},this._info}},{key:"setUserInfo",value:function(t){this._title.textContent=t.name,this._about.textContent=t.about,this._avatar.src=t.avatar}}])&&M(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W(n.key),n)}}function W(t){var e=function(t){if("object"!=K(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==K(e)?e:e+""}var X=new(function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._headers=e.headers,this._serverURL=e.serverURL,this._handlePromiseReturn=function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},(e=[{key:"getUserInfo",value:function(){var t=this;return fetch("".concat(this._serverURL,"/users/me"),{headers:this._headers}).then((function(e){return t._handlePromiseReturn(e)}))}},{key:"sendUserInfo",value:function(t){var e=this;return fetch("".concat(this._serverURL,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.about})}).then((function(t){return e._handlePromiseReturn(t)}))}},{key:"updateAvatar",value:function(t){var e=this;return fetch("".concat(this._serverURL,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((function(t){return e._handlePromiseReturn(t)}))}},{key:"getCards",value:function(){var t=this;return fetch("".concat(this._serverURL,"/cards"),{headers:this._headers}).then((function(e){return t._handlePromiseReturn(e)}))}},{key:"sendCard",value:function(t){var e=this;return fetch("".concat(this._serverURL,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then((function(t){return e._handlePromiseReturn(t)}))}},{key:"deleteCard",value:function(t){return fetch("".concat(this._serverURL,"/cards/").concat(t),{method:"DELETE",headers:this._headers})}},{key:"setLike",value:function(t){var e=this;return fetch("".concat(this._serverURL,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then((function(t){return e._handlePromiseReturn(t)}))}},{key:"deleteLike",value:function(t){var e=this;return fetch("".concat(this._serverURL,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then((function(t){return e._handlePromiseReturn(t)}))}}])&&Q(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}())({serverURL:"https://mesto.nomoreparties.co/v1/frontend-st-cohort-201",headers:{authorization:"e6fc6285-b316-4e8f-bbc9-054db2538a7b","Content-Type":"application/json"}}),Y="";Promise.all([X.getUserInfo(),X.getCards()]).then((function(t){Y=t[0]._id,console.log("ID пользователя:",Y),at.setUserInfo(t[0]),Z.renderElements(t[1])})).catch((function(t){console.log(t)}));var Z=new p({renderer:function(t){Z.addItem(yt(t,Y))}},".photo-cards"),$=document.querySelector(".popup_edit_profile "+t.formSelector),tt=document.querySelector(".popup_update-avatar "+t.formSelector),et=new c(t,$),rt=new c(t,tt),nt=document.querySelector(".popup_edit_profile"),ot=nt.querySelector("#profile_name"),it=nt.querySelector("#profile_about"),ut=document.querySelector(".profile__button"),at=new G({profileTitle:".profile__title",profileAbout:".profile__about",profileAvatar:".profile__avatar"}),ct=new E(".popup_edit_profile",{handleSubmitForm:function(t){X.sendUserInfo(t).then((function(t){at.setUserInfo({name:t.name,about:t.about,avatar:t.avatar}),ct.close()})).catch((function(t){console.log(t)})).finally((function(){ct.renderLoading(!1)}))}});document.querySelector(".profile__edit-avatar-button").addEventListener("click",(function(){lt.open(),rt.validateInputs(),rt.switchSubmitButton()}));var lt=new E(".popup_update-avatar",{handleSubmitForm:function(t){X.updateAvatar(t.avatar).then((function(t){at.setUserInfo({avatar:t.avatar,name:t.name,about:t.about}),lt.close()})).catch((function(t){console.log(t)})).finally((function(){lt.renderLoading(!1)}))}}),st=new c(t,document.querySelector(".popup_new-place "+t.formSelector)),ft=new q(".popup_view_image"),pt=new H(".popup_delete-place",{handleSubmitDelete:function(t,e){X.deleteCard(t).then((function(){e.deleteCard(),pt.close()})).catch((function(t){console.log(t)}))}}),dt=document.querySelector(".profile__add-button"),yt=function(t,e){var r=new o({item:t,currentUser:e,handleCardClick:function(){ft.open({title:t.name,src:t.link})},handleDeleteCard:function(t,e){pt.open(r),pt.getCard(t,e)},handleLikeCard:{handleSetLike:function(t){X.setLike(t).then((function(t){r.updateLikes(t.likes,"setLike")})).catch((function(t){console.log(t)}))},handleDeleteLike:function(t){X.deleteLike(t).then((function(t){r.updateLikes(t.likes,"deleteLike")})).catch((function(t){console.log(t)}))}}},"#photo-card");return r.createCard()},ht=new E(".popup_new-place",{handleSubmitForm:function(t){X.sendCard(t).then((function(t){Z.addNewItem(yt(t,Y)),ht.close()})).finally((function(){ht.renderLoading(!1)}))}});ut.addEventListener("click",(function(){var t;t=at.getUserInfo(),ot.value=t.title,it.value=t.about,ct.open(),et.validateInputs(),et.switchSubmitButton()})),dt.addEventListener("click",(function(){ht.open(),st.validateInputs(),st.switchSubmitButton()})),document.addEventListener("DOMContentLoaded",(function(){et.enableValidation(),st.enableValidation(),rt.enableValidation(),ft.setEventListeners(),ct.setEventListeners(),pt.setEventListeners(),ht.setEventListeners(),lt.setEventListeners()}))})();